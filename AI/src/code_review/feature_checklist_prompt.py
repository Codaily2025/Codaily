from langchain.prompts import ChatPromptTemplate

feature_checklist_prompt = ChatPromptTemplate.from_messages([
        (
        "system",
        "당신은 백엔드 소프트웨어 설계 전문가이며, 기능 구현을 위한 핵심 로직만 식별하여 표준 체크리스트로 작성합니다."
    ),
    (
        "human",
        """
        다음은 사용자의 기능 명세 목록입니다. 각 기능마다 featureId와 기능명이 주어집니다.

        📌 당신의 역할:
        - 각 기능이 실제로 작동하기 위해 **백엔드에서 반드시 구현되어야 할 핵심 로직**만 추출하여 체크리스트로 작성하세요.
        - 체크리스트를 생성할 때 기능명을 기반으로 설명을 참고하여 주세요.

        📌 반드시 지켜야 할 조건:
        - 다음 항목은 **절대 포함하지 마세요**:
            - 버튼/입력 필드 등 UI 관련 항목
            - 유효성 검사 (예: 이메일 형식, 비밀번호 길이 등)
            - 포맷 검사, 정규식, 공백/입력 여부 확인
            - 예외 처리, 에러 메시지
            - 보안 처리, 암호화, 인증 미들웨어
            - 사용자 경험 및 편의성 관련 항목
            - 로그/모니터링/알림 등 비즈니스 핵심 로직이 아닌 기능


        - 포함해야 할 항목은 다음과 같습니다:
            - 컨트롤러 → 서비스 → 레포지토리 흐름에서 **기능을 직접 수행하는 로직**
            - 도메인 모델을 변경하는 트랜잭션성 로직
            - 외부 API 연동 또는 비즈니스 상태 변경에 관여하는 로직
            - 데이터 저장/조회/수정/삭제 (CRUD)
            - 핵심적인 연산 또는 상태 판별 로직

        📌 출력 형식:
        - 응답은 반드시 아래와 같이 JSON 형식만 출력하세요. 다른 문장이나 설명은 포함하지 마세요.
        - 항목 수는 기능당 **2개 이상 5개 이하**
        - 항목은 **짧고 명확한 문장**으로 표현하세요.

        📌 응답 예시:
            ```json
            {{
            "101": [
                "OAuth 인증 URL 리다이렉트",
                "Authorization code로 access token 요청",
                "사용자 정보로 JWT 발급",
                "JWT를 쿠키에 저장"
            }}


        아래는 기능 목록입니다:
        {feature_list}
        """
    )
])



feature_checklist_extra_prompt = ChatPromptTemplate.from_messages([
    (
        "system",
        "당신은 백엔드 소프트웨어 설계 전문가이며, 기능 구현을 위한 핵심 로직만 식별하여 표준 체크리스트로 작성합니다."
    ),
    (
        "human",
        """
        다음은 사용자의 프로젝트 주제와 기능 명세 목록입니다.
        각 기능마다 featureId, 기능명, 프로젝트 주제가 주어집니다.

        📌 당신의 역할:
        - 각 기능이 실제로 작동하기 위해 **반드시 구현되어야 할 핵심 로직**만 추출하여 체크리스트를 작성하세요.
        - **기능명이 프로젝트 주제와 전혀 관련 없거나, 구현 불가능/무의미하다면 valid를 false**로 하고 checklist는 빈 배열로 둡니다.
        - 기능명이 체크리스트를 구현하기에 적합하지 않은 경우 (예: ".", "없음", ",", ";")도 valid=false 처리합니다.

        📌 반드시 지켜야 할 조건:
        - 다음 항목은 절대 포함하지 마세요:
            - UI 관련, 유효성 검사, 포맷 검사, 예외 처리, 보안 처리, 사용자 경험 관련, 로그/모니터링
        - 포함해야 할 항목:
            - 컨트롤러→서비스→레포지토리 흐름의 핵심 비즈니스 로직
            - 도메인 상태 변경 트랜잭션
            - 외부 API 연동
            - CRUD 및 주요 연산 로직

        📌 출력 형식:
        - JSON 형식으로만 응답 (기능ID를 key로 사용)
        - 각 기능은 다음 구조여야 함:
            {{
              "기능ID": {{
                "valid": true/false,
                "checklist": ["항목1", "항목2", ...]
              }}
            }}
        - checklist 항목 수는 2~5개, valid=false인 경우 checklist는 빈 배열

        📌 예시:
            ```json
            {{
              "101": {{
                "valid": true,
                "checklist": [
                  "OAuth 인증 URL 리다이렉트",
                  "Authorization code로 access token 요청",
                  "사용자 정보로 JWT 발급"
                ]
            ```

        아래는 기능 목록입니다:
        {feature_list}
        """
    )
])
